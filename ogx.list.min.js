/* globules.io OGX.List 1.3.2 */
if(typeof OGX==="undefined"){var OGX={}}OGX.List=function(){if(typeof moment==="undefined"){console.log("Error: moment.js not found!");return}var filteringMode="and";var filterCount=0;var indexes=false;if(arguments.length===1&&arguments[0]instanceof Array){arguments=arguments[0]}var array=Object.create(Array.prototype);array=Array.apply(array,arguments)||array;for(var method in OGX.List.prototype){if(OGX.List.prototype.hasOwnProperty(method)){array[method]=OGX.List.prototype[method]}}array.insert=function(e,t){if(typeof t==="undefined"){array.push(e)}else{array.splice(t,0,e)}if(indexes){addToCache(e)}return true};array.delete=function(e){var t=this;var r=array.splice(e,1);if(r.length){if(indexes){var i=matchesCache(r[0]);if(i){setTimeout(function(){t.rebuild(i)},0)}}return r[0]}return false};array.last=function(){if(this.length){return this[this.length-1]}return};array.findDelete=function(__property,__value,__limit){var t=0;if(typeof __limit==="undefined"){__limit=0}var removed=new OGX.List;var ev,prop;for(var i=0;i<this.length;i++){prop=null;ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(e){}if(prop===null||typeof prop==="undefined"){return false}if(prop===__value){removed.push(this.splice(i,1)[0]);if(indexes){var idxs=matchesCache(removed.last());if(idxs){this.rebuild(idxs)}}t++;if(__limit>0&&__limit===t){if(__limit===1){return removed[0]}else{return removed}}i--}}return removed};array.findReplace=function(__property,__value,__object,__limit){var t=0;if(typeof __limit==="undefined"){__limit=0}var replaced=new OGX.List;var ev,prop;for(var i=0;i<this.length;i++){prop=null;ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(e){}if(prop===null||typeof prop==="undefined"){return false}if(prop===__value){replaced.push(this[i]);t++;this[i]=__object;if(__limit>0&&__limit===t){if(__limit===1){return replaced[0]}else{return replaced}}}}if(!replaced.length){return false}else{return replaced}};array.findUpdate=function(__property,__value,__object,__strict,__limit){var t=0;if(typeof __strict==="undefined"){__strict=false}if(typeof __limit==="undefined"){__limit=0}var updated=new OGX.List;var upd,ev,prop;for(var i=0;i<this.length;i++){prop=null;ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(e){}if(prop===null||typeof prop==="undefined"){return false}if(prop===__value){upd=false;for(var a in __object){if(__strict){if(this[i].hasOwnProperty(a)){this[i][a]=__object[a];upd=true;t++}}else{this[i][a]=__object[a];upd=true;t++}}if(upd){updated.push(this[i]);if(__limit>0&&__limit===t){if(__limit===1){return updated[0]}else{return updated}}}}}if(!updated.length){return false}else{return updated}};array.findIndex=function(__property,__value){var isReg=false;if(__value instanceof RegExp){isReg=true}var ev,prop;for(var i=0;i<this.length;i++){prop=null;ev="this["+i+"]."+__property;try{prop=eval(ev)}catch(e){}if(prop===null){return false}if(isReg){if(prop.match(__value)){return{index:i}}}else{if(prop===__value){return{index:i}}}}return false};array.find=function(e,t,r){var i=0;var a=new OGX.List;var s=false;if(t instanceof RegExp){s=true}if(typeof r==="undefined"){r=0}for(var n=0;n<this.length;n++){if(s){if(this[n][e].match(t)){a.push(this[n]);i++}}else{if(this[n][e]===t){a.push(this[n]);i++}}if(r>0&&i===r){if(r===1){return a[0]}else{return a}}}if(!a.length){return false}else{return a}};array.swap=function(e,t){var r=this[e];this[e]=this[t];this[t]=r};array.cache=function(){if(!indexes){indexes={}}var e=[];var t=[];var r;if(arguments.length>1){for(var i=0;i<arguments.length;i++){e.push(arguments[i])}e=e.join("|")}else{e=arguments[0]}if(!indexes.hasOwnProperty(e)){indexes[e]={}}for(var a=0;a<this.length;a++){t=[];for(var i=0;i<arguments.length;i++){t.push(this[a][arguments[i]])}t=t.join("|");if(!indexes[e].hasOwnProperty(t)){indexes[e][t]=[]}indexes[e][t].push(this[a])}return true};array.uncache=function(e){if(!indexes){return false}var t=e;if(arguments.length>1){t=arguments.join("|")}if(indexes.hasOwnProperty(t)){delete indexes[t];return true}return false};array.deleteProperty=function(e){var t=0;for(var r=0;r<this.length;r++){if(this[r].hasOwnProperty(e)){delete this[r][e];t++}}if(indexes){this.rebuild()}return t};function addToCache(e){var t;for(var r in indexes){if(r.indexOf("|")!==-1){r=r.split("|");t=[];for(var i=0;i<r.length;i++){if(e.hasOwnProperty(r[i])){t.push(e[r[i]])}}t=t.join("|");r=r.join("|")}else{if(e.hasOwnProperty(r)){t=e[r]}}if(!indexes.hasOwnProperty(r)){indexes[r]={}}indexes[r][t]=e}}array.rebuild=function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++){delete indexes[e[t]];this.cache(e[t])}}else{if(indexes){for(var r in indexes){delete indexes[r];this.cache.apply(this,r.split("|"))}}}};function matchesCache(e){var t=[];var r=[];var i;for(var a in indexes){i=true;if(a.indexOf("|")!==-1){t=a.split("|")}else{t=[a]}for(var s=0;s<t.length;s++){if(!e.hasOwnProperty(t[s])){i=false;break}}if(i){r.push(a)}}if(r.length){return r}return false}array.read=function(e,t,r){var i=arguments;if(!indexes){return false}if(!i.length){return indexes}var a,s;if(typeof e==="object"){r=i[1];a=[];s=[];for(var n in e){a.push(n);s.push(e[n])}a=a.join("|");s=s.join("|")}else{a=e;s=t}if(typeof r==="undefined"){r=0}if(indexes.hasOwnProperty(a)&&indexes[a].hasOwnProperty(s)){if(r){if(r>1){return indexes[a][s].splice(0,r)}else{return indexes[a][s][0]}}return indexes[a][s]}return false};array.clear=function(){indexes=false;filterCount=0;this.length=0};array.unique=function(e,t,r){if(typeof t==="undefined"){t=true}if(typeof r==="undefined"){r=[e]}else{if(!Array.isArray(r)){r=[r]}}var i={};i[e]={regex:/(.){1,}/};var a=this.get();var s=[];var n=new OGX.List;var f;for(var l=0;l<a.length;l++){if(s.indexOf(a[l][e])===-1){s.push(a[l][e]);if(t){f={};for(var o=0;o<r.length;o++){f[r[o]]=a[l][e]}n.push(f)}}}if(t){return n}return s};array.order=function(e,t){array.sort(dynamicSort(e,t))};function dynamicSort(r,i){return function(e,t){return e[r]<t[r]?i*-1:e[r]>t[r]?i:0}}array.group=function(e,t,r){if(Array.isArray(e)){return array.groupm(e,t,r)}var i;var a={};for(var s=0;s<this.length;s++){i=extract(this[s],e,t,r);if(i){i=i.split(".").pop();if(!a.hasOwnProperty(i)){a[i]=new OGX.List}a[i].push(this[s])}}return a};array.groupm=function(f,l,o){function h(e,t){var r=new OGX.List(e);var i=l;var a=o;if(typeof l!=="undefined"){Array.isArray(l)?i=l[t]:null}if(typeof o!=="undefined"){Array.isArray(o)?a=o[t]:null}var s=r.group(f[t],i,a);if(t+1<=f.length-1){for(var n in s){s[n]=h(s[n],t+1)}}return s}var e=h(this,0);return e};function extract(__item,__by,__mode,__param){var data;try{data=eval("__item."+__by)}catch(e){}if(data){switch(__mode){case"substr":data=data.substr(__param[0],__param[1]);return data;case"numrange":data=Number(data);if(!Array.isArray(__param)){data=Math.floor(data/__param);data=data*__param+" - "+(data+1)*__param}else{data=Math.floor(data/__param[0]);if(__param[2]==="pre"){data=__param[1]+data*__param[0]+" - "+__param[1]+(data+1)*__param[0]}else{data=data*__param[0]+__param[1]+" - "+(data+1)*__param[0]+__param[1]}}return data;case"date":if(!Array.isArray(__param)){if(__param==="year"){data=data.substr(0,4);return data}else{if(__param==="month"){data=data.substr(0,7);return data}else{if(__param==="week"){data=data.substr(0,4)+" week "+moment(data).week();return data}}}}data=moment(data).unix();data=Math.floor(data/(__param[0]*60*60*24));data=data*(__param[0]*60*60*24);data=moment(data*1e3).format(__param[1])+" - "+moment(data*1e3+__param[0]*1e3*60*60*24).format(__param[1]);return data;default:return data}}return false}array.filters={};array.addFilter=function(e,t,r){if(!this.filters.hasOwnProperty(e)){this.filters[e]=[]}var i={};i[t]=r;this.filters[e].push(i);filterCount++;return true};array.removeFilter=function(e){if(this.filters.hasOwnProperty(e)){filterCount-=this.filters[e].length;delete this.filters[e];return true}return false};array.getFilters=function(){return this.filters};array.resetFilters=function(){this.filters={};filterCount=0};array.setFilters=function(e){this.resetFilters();for(var t in e){for(var r=0;r<e[t].length;r++){for(var i in e[t][r]){array.addFilter(t,i,e[t][r][i])}}}};array.setFilteringMode=function(e){filterMode=e};array.get=function(e,t,r,i,a){if(typeof t==="undefined"){t=false}if(typeof r==="undefined"){r=false}if(typeof r==="number"){i=r;r=false}if(typeof i==="undefined"){i=0}if(typeof a==="undefined"){a=false}var s=this.getFilters();this.resetFilters();for(var n in e){for(var f in e[n]){this.addFilter(n,f,e[n][f])}}var l=this.filter(i,a);this.resetFilters();this.setFilters(s);if(a){return l}if(i===1){if(l.length){return l[0]}return false}if(t){for(var n in t){l.order(n,t[n]);break}}if(r){return l.group.apply(null,r)}return l};array.unset=function(e,t){if(typeof t==="undefined"){t=0}var r=new OGX.List;var i=this.get(e,null,null,t,true);if(i){for(var a=0;a<i.length;a++){r.push(this.delete(i[a]-r.length))}}if(t===1&&r.length){return r[0]}return r};array.update=function(e,t,r,i){if(typeof r==="undefined"){r=false}if(typeof i==="undefined"){i=0}var a=this.get(e,null,i);if(a){if(!Array.isArray(a)){a=[itinerary]}if(a.length){var s=[];var n;for(var f=0;f<a.length;f++){for(var l in t){if(!r||a[f].hasOwnProperty(l)){a[f][l]=t[l];n=matchesCache(a[f]);if(n){if(s.indexOf(n)===-1){s.push(n)}}}}}if(indexes&&s.length){setTimeout(function(){that.rebuild(s)},0)}return a}}return[]};array.filter=function(__limit,__as_position){if(typeof __limit==="undefined"){__limit=0}if(typeof __as_position==="undefined"){__as_position=false}var ar=[];var positions=[];var isDate,isString,isArray,isObject;var hasFilters=false;var reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g;var isMatch=false;var matches=0;var str,o,err;var counter,total;for(var i=0;i<this.length;i++){isMatch=true;matches=0;for(var a in this.filters){err=false;hasFilters=true;try{o=null;str="this["+i+"]."+a;o=eval(str)}catch(e){err=true}if(!err&&typeof o!=="undefined"){isDate=false;isString=false;isArray=Array.isArray(o);isObject=!isArray&&typeof o==="object";if(!isArray){if(typeof o==="string"){isString=true;if(o.match(reg)){isDate=true}}}else{if(typeof o[0]==="string"){isString=true;if(o[0].match(reg)){isDate=true}}}for(var j=0;j<this.filters[a].length;j++){for(var b in this.filters[a][j]){if(!String(this.filters[a][j][b]).length){matches++}else{if(b==="function"){isMatch=this.filters[a][j][b](o);if(isMatch){matches++}}else{switch(b){case"eq":if(isDate){if(moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")){isMatch=false}else{matches++}}else{if(isString){if(o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()){isMatch=false}else{matches++}}else{if(o!==this.filters[a][j][b]){isMatch=false}else{matches++}}}break;case"eqjson":if(JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])){isMatch=false}else{matches++}break;case"neq":if(isDate){if(moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")){isMatch=false}else{matches++}}else{if(isString){if(o.toLowerCase()===this.filters[a][j][b].toLowerCase()){isMatch=false}else{matches++}}else{if(o===this.filters[a][j][b]){isMatch=false}else{matches++}}}break;case"in":if(isString&&Array.isArray(this.filters[a][j][b])){isMatch=false;for(var k=0;k<this.filters[a][j][b].length;k++){if(o.indexOf(this.filters[a][j][b][k])!==-1){isMatch=true;break}}if(isMatch){matches++}}else{if(isString){if(isArray){if(o.indexOf(this.filters[a][j][b])===-1){isMatch=false}else{matches++}}else{if(o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())===-1){isMatch=false}else{matches++}}}else{if(isArray){if(o.indexOf(this.filters[a][j][b])===-1){isMatch=false}else{matches++}}else{if(isObject){counter=0;total=0;for(var p in this.filters[a][j][b]){total++;if(o.hasOwnProperty(p)&&String(o[p]).toLocaleLowerCase().indexOf(String(this.filters[a][j][b][p]).toLowerCase())!==-1){counter++}}isMatch=total===counter;if(isMatch){matches++}}}}}break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++){if(o.indexOf(this.filters[a][j][b][k])!==-1){isMatch=false;break}}if(isMatch){matches++}}else{if(isString){if(o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())!==-1){isMatch=false}else{matches++}}else{if(o.indexOf(this.filters[a][j][b])!==-1){isMatch=false}else{matches++}}}break;case"gt":if(isDate){if(moment(o).unix()<=moment(this.filters[a][j][b]).unix()){isMatch=false}else{matches++}}else{if(o<=this.filters[a][j][b]){isMatch=false}else{matches++}}break;case"gte":if(isDate){if(moment(o).unix()<moment(this.filters[a][j][b]).unix()){isMatch=false}else{matches++}}else{if(o<this.filters[a][j][b]){isMatch=false}else{matches++}}break;case"lt":if(isDate){if(moment(o).unix()>=moment(this.filters[a][j][b]).unix()){isMatch=false}else{matches++}}else{if(o>=this.filters[a][j][b]){isMatch=false}else{matches++}}break;case"lte":if(isDate){if(moment(o).unix()>moment(this.filters[a][j][b]).unix()){isMatch=false}else{matches++}}else{if(o>this.filters[a][j][b]){isMatch=false}else{matches++}}break;case"btw":if(isDate){if(moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()){isMatch=false}else{matches++}}else{if(this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o){isMatch=false}else{matches++}}break;case"substr":if(o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()){isMatch=false}else{matches++}break;case"regex":if(!o.toString().match(this.filters[a][j][b])){isMatch=false}else{matches++}break}}}if(!isMatch){break}}}}else{isMatch=false}if(filteringMode==="or"){if(isMatch){ar.push(this[i]);positions.push(i)}}else{if(matches===filterCount){ar.push(this[i]);positions.push(i)}}if(__limit&&ar.length===__limit){if(__as_position){return positions}return OGX.List.apply(null,ar)}}}if(__as_position){return positions}if(hasFilters){return OGX.List.apply(null,ar)}return array};return array};